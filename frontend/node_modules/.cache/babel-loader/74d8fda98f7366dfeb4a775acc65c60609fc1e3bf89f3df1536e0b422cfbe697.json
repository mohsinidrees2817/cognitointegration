{"ast":null,"code":"import _slicedToArray from\"/Users/mohsinidrees/Desktop/cognito_project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{CognitoUser}from\"amazon-cognito-identity-js\";import{Headercontext}from\"../Headerdata/HeaderData\";import{ToastContainer}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Layout from\"../layout\";import Innerlayout from\"../layout/Innerlayout\";import Inputbox from\"../common/Inputbox\";import Button from\"../common/Button\";import{Link,Navigate,useNavigate}from\"react-router-dom\";import UserPool from\"./UserPool\";import Error from\"../common/Error\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ForgotPassword=function ForgotPassword(){var navigate=useNavigate();var _useContext=useContext(Headercontext),setLogin=_useContext.setLogin,setForgetPassword=_useContext.setForgetPassword,setToastMessage=_useContext.setToastMessage;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newPassword=_useState4[0],setNewpassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),confirmPassword=_useState6[0],setConfirmpassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isVerifyCode=_useState8[0],setIsverifycode=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),verificationCode=_useState10[0],setVerificationcode=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),passwordIcon=_useState12[0],setPasswordIcon=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),passwordIcon2=_useState14[0],setPasswordIcon2=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),loader=_useState16[0],setLoader=_useState16[1];var _useState17=useState({isError:false,message:\"\"}),_useState18=_slicedToArray(_useState17,2),error=_useState18[0],setError=_useState18[1];useEffect(function(){setError({isError:false,message:\"\"});},[email,newPassword,confirmPassword,verificationCode]);var _onSubmit=function onSubmit(e){e.preventDefault();setLoader(true);var user=new CognitoUser({Username:email,Pool:UserPool});if(!isVerifyCode){user.forgotPassword({onSuccess:function onSuccess(result){console.log(\"call result: \"+result);setLoader(false);},onFailure:function onFailure(err){console.log(err);setError({isError:true,message:err.message||JSON.stringify(err)});setLoader(false);},inputVerificationCode:function inputVerificationCode(data){console.log(\"Input code:\",data);setIsverifycode(true);setLoader(false);}});}else{if(confirmPassword==newPassword){user.confirmPassword(verificationCode,newPassword,{onSuccess:function onSuccess(data){setLoader(false);console.log(\"onSuccess:\",data);setToastMessage({display:true,message:\"password updated succesfully\"});setLogin(true);setForgetPassword(false);navigate(\"/signin\");},onFailure:function onFailure(err){setLoader(false);setError({isError:true,message:err.message||JSON.stringify(err)});}});}else{setLoader(false);setError({isError:true,message:\"Password and confirmed password are diffferent\"});}}};return/*#__PURE__*/_jsxs(Layout,{children:[!isVerifyCode&&/*#__PURE__*/_jsxs(Innerlayout,{heading:\"Forgot Password\",subheading:\"An email with a link will be sent to your email address to change password.\",onSubmit:function onSubmit(e){return _onSubmit(e);},children:[/*#__PURE__*/_jsx(Inputbox,{type:\"email\",placeholder:\"Enter your email\",required:true,heading:\"Email*\",handlechange:function handlechange(e){setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Button,{actiontype:\"Forgot Password\",type:\"submit\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"simpletext\",children:\"Have you remembered your password\"}),/*#__PURE__*/_jsx(Link,{to:\"/signin\",children:/*#__PURE__*/_jsx(\"p\",{className:\"forgot-password\",children:\"Sign In\"})})]})]}),isVerifyCode&&/*#__PURE__*/_jsxs(Innerlayout,{heading:\"Set Password\",subheading:\"An code sent to youe email and add new password.\",onSubmit:function onSubmit(e){_onSubmit(e);},children:[/*#__PURE__*/_jsx(Inputbox,{type:\"text\",placeholder:\"000000\",required:true,heading:\"Code\",handlechange:function handlechange(e){setVerificationcode(e.target.value);}}),/*#__PURE__*/_jsx(Inputbox,{type:\"password\",placeholder:\"********\",required:true,heading:\"Password\",handlechange:function handlechange(e){setNewpassword(e.target.value);}}),/*#__PURE__*/_jsx(Inputbox,{type:\"password\",placeholder:\"********\",required:true,heading:\"Repeat Password\",handlechange:function handlechange(e){setConfirmpassword(e.target.value);}}),error.isError&&/*#__PURE__*/_jsx(Error,{errormessage:error.message}),/*#__PURE__*/_jsx(Button,{actiontype:\"Set Password\"})]})]});};export default ForgotPassword;","map":{"version":3,"names":["React","useState","useEffect","useContext","CognitoUser","Headercontext","ToastContainer","Layout","Innerlayout","Inputbox","Button","Link","Navigate","useNavigate","UserPool","Error","jsx","_jsx","jsxs","_jsxs","ForgotPassword","navigate","_useContext","setLogin","setForgetPassword","setToastMessage","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","newPassword","setNewpassword","_useState5","_useState6","confirmPassword","setConfirmpassword","_useState7","_useState8","isVerifyCode","setIsverifycode","_useState9","_useState10","verificationCode","setVerificationcode","_useState11","_useState12","passwordIcon","setPasswordIcon","_useState13","_useState14","passwordIcon2","setPasswordIcon2","_useState15","_useState16","loader","setLoader","_useState17","isError","message","_useState18","error","setError","onSubmit","e","preventDefault","user","Username","Pool","forgotPassword","onSuccess","result","console","log","onFailure","err","JSON","stringify","inputVerificationCode","data","display","children","heading","subheading","type","placeholder","required","handlechange","target","value","actiontype","className","to","errormessage"],"sources":["/Users/mohsinidrees/Desktop/cognito_project/frontend/src/components/authentication/ForgotPassword.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { CognitoUser } from \"amazon-cognito-identity-js\";\nimport { Headercontext } from \"../Headerdata/HeaderData\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Layout from \"../layout\";\nimport Innerlayout from \"../layout/Innerlayout\";\nimport Inputbox from \"../common/Inputbox\";\nimport Button from \"../common/Button\";\nimport { Link, Navigate, useNavigate } from \"react-router-dom\";\nimport UserPool from \"./UserPool\";\nimport Error from \"../common/Error\";\n\nconst ForgotPassword = () => {\n  const navigate = useNavigate();\n\n  const { setLogin, setForgetPassword, setToastMessage } =\n    useContext(Headercontext);\n\n  const [email, setEmail] = useState(\"\");\n  const [newPassword, setNewpassword] = useState(\"\");\n  const [confirmPassword, setConfirmpassword] = useState(\"\");\n  const [isVerifyCode, setIsverifycode] = useState(false);\n  const [verificationCode, setVerificationcode] = useState(\"\");\n  const [passwordIcon, setPasswordIcon] = useState(true);\n  const [passwordIcon2, setPasswordIcon2] = useState(true);\n  const [loader, setLoader] = useState(false);\n\n  const [error, setError] = useState({\n    isError: false,\n    message: \"\",\n  });\n\n  useEffect(() => {\n    setError({\n      isError: false,\n      message: \"\",\n    });\n  }, [email, newPassword, confirmPassword, verificationCode]);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    setLoader(true);\n    const user = new CognitoUser({\n      Username: email,\n      Pool: UserPool,\n    });\n\n    if (!isVerifyCode) {\n      user.forgotPassword({\n        onSuccess: function (result) {\n          console.log(\"call result: \" + result);\n          setLoader(false);\n        },\n        onFailure: function (err) {\n          console.log(err);\n          setError({\n            isError: true,\n            message: err.message || JSON.stringify(err),\n          });\n          setLoader(false);\n        },\n        inputVerificationCode: (data) => {\n          console.log(\"Input code:\", data);\n          setIsverifycode(true);\n          setLoader(false);\n        },\n      });\n    } else {\n      if (confirmPassword == newPassword) {\n        user.confirmPassword(verificationCode, newPassword, {\n          onSuccess: (data) => {\n            setLoader(false);\n            console.log(\"onSuccess:\", data);\n            setToastMessage({\n              display: true,\n              message: \"password updated succesfully\",\n            });\n            setLogin(true);\n            setForgetPassword(false);\n            navigate(\"/signin\");\n          },\n          onFailure: (err) => {\n            setLoader(false);\n            setError({\n              isError: true,\n              message: err.message || JSON.stringify(err),\n            });\n          },\n        });\n      } else {\n        setLoader(false);\n        setError({\n          isError: true,\n          message: \"Password and confirmed password are diffferent\",\n        });\n      }\n    }\n  };\n\n  return (\n    <Layout>\n      {!isVerifyCode && (\n        <Innerlayout\n          heading={\"Forgot Password\"}\n          subheading=\"An email with a link will be sent to your email address to change password.\"\n          onSubmit={(e) => onSubmit(e)}\n        >\n          <Inputbox\n            type=\"email\"\n            placeholder=\"Enter your email\"\n            required\n            heading=\"Email*\"\n            handlechange={(e) => {\n              setEmail(e.target.value);\n            }}\n          />\n          <Button actiontype={\"Forgot Password\"} type=\"submit\" />\n          <div>\n            <p className=\"simpletext\">Have you remembered your password</p>\n            <Link to=\"/signin\">\n              <p className=\"forgot-password\">Sign In</p>\n            </Link>\n          </div>\n        </Innerlayout>\n      )}\n      {isVerifyCode && (\n        <Innerlayout\n          heading={\"Set Password\"}\n          subheading=\"An code sent to youe email and add new password.\"\n          onSubmit={(e) => {\n            onSubmit(e);\n          }}\n        >\n          <Inputbox\n            type=\"text\"\n            placeholder=\"000000\"\n            required\n            heading=\"Code\"\n            handlechange={(e) => {\n              setVerificationcode(e.target.value);\n            }}\n          />\n          <Inputbox\n            type=\"password\"\n            placeholder=\"********\"\n            required\n            heading=\"Password\"\n            handlechange={(e) => {\n              setNewpassword(e.target.value);\n            }}\n          />\n          <Inputbox\n            type=\"password\"\n            placeholder=\"********\"\n            required\n            heading=\"Repeat Password\"\n            handlechange={(e) => {\n              setConfirmpassword(e.target.value);\n            }}\n          />\n          {error.isError && <Error errormessage={error.message} />}\n\n          <Button actiontype={\"Set Password\"} />\n        </Innerlayout>\n      )}\n    </Layout>\n  );\n};\n\nexport default ForgotPassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}